# CLAUDE.md - 📚 Go/Web初心者向けガイド

このファイルは、Claude Codeがこのリポジトリで作業する際のガイドです。

## 👋 初心者の方へ

**このプロジェクトはGo言語とWeb開発を学びたい初心者のための教材です。**

## 📚 プロジェクトの簡単説明

これは個人用の「書籍管理アプリ」です。
- 書籍を登録して、読書進捗を管理できます
- Go言語で書かれたバックエンド（サーバー側）とHTML/CSS/JavaScriptのフロントエンド（ブラウザ側）があります

## 📋 よく使うコマンド

### 🚀 アプリを動かす
```bash
# アプリを開始（ポート8080で起動）
go run cmd/main.go

# ブラウザで以下にアクセス
# http://localhost:8080
```

### 📦 その他のコマンド
```bash
# ライブラリをインストール
go mod download

# テストを実行
go test ./...

# サーバーが動いているか確認
curl http://localhost:8080/api/v1/health
```

### 💾 データはどこに保存される？
- ファイル: `./books.db` (SQLiteデータベース)
- アプリ起動時に自動で作成されます

## 🏠 アプリの構成（初心者向け）

このアプリは「4層構成」というきれいな作りになっています：

### 📁 フォルダの意味
1. **`internal/model/`** - データの形（書籍の情報をどう保存するか）
2. **`internal/repository/`** - データベースとのやり取り（保存・取得）
3. **`internal/usecase/`** - アプリのルール（「読書中の本は再度開始できない」など）
4. **`internal/handler/`** - Webブラウザからのリクエストを処理

### 🔄 情報の流れ
```
ブラウザ → Handler → Usecase → Repository → データベース
```

例：ブラウザで「書籍一覧」を見るとき
1. Handlerがリクエストを受け取る
2. Usecaseが「一覧を表示するルール」を実行
3. Repositoryがデータベースから書籍データを取得
4. 取得したデータをブラウザに返す

## 📚 書籍データの特徴

### 📈 読書ステータスの変化
```
未読 → 読書中 → 読了 or 中断
```
- 本を購入したら「未読」
- 読み始めたら「読書中」
- 読み終えたら「読了」または「中断」

### 🕰️ 自動日付記録
- 読書を開始すると、自動で開始日を記録
- 読書を完了すると、自動で終了日を記録

### 📊 統計機能
- 今月何冊読んだか
- 本にいくら使ったか
- 平均評価は何点か

## ⚙️ 設定変更（上級者向け）

環境変数で設定を変更できます：

| 設定項目 | 環境変数 | デフォルト | 説明 |
|---------|-----------|------------|------|
| ポート番号 | `PORT` | 8080 | アプリが使うポート番号 |
| データベース | `DB_PATH` | ./books.db | データが保存される場所 |

## 🔗 APIの使い方（上級者向け）

### 主要なURL
- **書籍管理**: `/api/v1/books`
- **読書開始**: `/api/v1/books/{id}/start-reading`
- **読書完了**: `/api/v1/books/{id}/finish-reading`
- **統計情報**: `/api/v1/statistics`

### 検索機能
著者、出版社、タグ、ステータス、評価、キーワードで検索できます。

## ⚠️ 開発時のポイント

### 💾 データベースについて
- アプリ起動時に自動でテーブルが作成されます
- データベースの設計は `internal/database/migration.sql` に書かれています

### ✅ 入力チェック
- 書籍登録時：タイトル、著者、購入日は必須
- 評価：1点から5点まで
- 購入日：未来の日付は入力できません

### 📜 ログ
- アクセスログが自動で出力されます
- Ctrl+Cで終了時、安全にシャットダウンします